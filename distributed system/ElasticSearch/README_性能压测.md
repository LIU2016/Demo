我们采用官方指定的es压测工具esrally对目前的开发环境的es集群进行了性能压测。

**硬件配置**：

三台【证通云服务器】，其中：

2台ES集群服务器（192.168.130.27,192.168.133.27）搭建6个ES实例，

1台ES压测服务器（192.168.130.69）。

集群配置如下，其中133.27是IO密集型服务器，配置低：![Es节点配置](C:\Users\lqd\Desktop\esrally\Es节点配置.bmp)

**软件指标：**

1，我们用开发环境的作业作答数据，创建了一个200W数据量（document）的学生作答索引。

2，这次track（压测的方案、策略）操作了创建索引、删除索引、批量插入数据、全文本搜索数据，用8个客户端同时请求。

**压测结果：**

1，第一轮压测，要求：每秒的并发量是1000，结果如下：

全文本搜索请求：latency：38ms，service time：35ms，最大吞吐量：999.45doc/s。

![1K](C:\Users\lqd\Desktop\esrally\1K.png)

2，第一轮压测，要求：每秒的并发量是10000，结果如下：

全文本搜索请求：latency：6.9s，service time：41ms，最大吞吐量：2255.45 doc/s。

![1W](C:\Users\lqd\Desktop\esrally\1W.png)

3，第三轮压测，要求：每秒的并发量是2000，结果如下：

全文本搜索请求：latency：51ms，service time：26ms，最大吞吐量：1998.45doc/s。

![2K](C:\Users\lqd\Desktop\esrally\2K.png)

结论：目前以开发环境这种服务配置，我们能够维持毫秒级别访问速度的并发量不能超过3000每秒。

当然，后续有更高的性能要求，我们再做持续优化。